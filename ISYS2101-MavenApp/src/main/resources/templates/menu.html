<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Page</title>
    <link rel="shortcut icon" href="/image/logo.PNG" />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- FONT AWESOME -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <!-- MAIN CSS -->
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/menu.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
    <header></header>

    <main>
        <!-- CAROUSEL -->
        <section class="carousel">
            <div class="carousel__content">
                <h1>OUR MENU</h1>
                <a href="/">HOME</a>
                <a href="/delivery">DISHES</a>
            </div>
        </section>
        <!-- NUMBERS -->
        <section class="number">
            <div class="number__content">
                <div class="number__item">
                    <p class="num">35000</p>
                    <p>Dishes Served</p>
                </div>
                <div class="number__item">
                    <p class="num">1000</p>
                    <p>Happy Clients</p>
                </div>
                <div class="number__item">
                    <p class="num">4.5</p>
                    <p>Rating</p>
                </div>
                <div class="number__item">
                    <p class="num">1023</p>
                    <p>Expert Employees</p>
                </div>
            </div>
        </section>
        <!-- VOUCHER -->
        <div class="container">
            <section class="voucher">
                <div class="voucher__content1" onclick="goToVoucher()">
                    <h3>Restaurant Online Ordering System</h3>
                    <button class="btn btn_primary voucher__apply">Apply Now</button>
                </div>
                <div class="voucher__content2">
                    <div>
                        <h3>Welcome To ROOS</h3>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis, vitae aspernatur.
                            Minima sapiente magni at.</p>
                    </div>
                    <button class="btn btn_primary" id="post_address_btn">Input Your Address Please</button>
                </div>
            </section>
        
            <!--ADD ADDRESS FORM-->
            <div id="overlay">
                <form action="/" method="POST" class="upload_address" id="address_form">
                    <div class="form_title">
                        <h3>Enter your address</h3>
                        <i class="fa-regular fa-circle-xmark" id="close_btn"></i>
                    </div>

                    <div class="caption">
                        <input id="search_input" type="text" name="text" placeholder="Enter address here!">
                    </div>

                    <div id="map"></div>

                    <div class="address_btn">
                        <a href="/menu"><input type="button" onclick="" value="Continue as guest" name="post_address"
                            class="btn btn_primary post_address"></a>
                        <p>or</p>
                        <a href="/login"><input type="button" onclick="" value="Login" name="login" class="btn btn_primary post_address"></a>
                    </div>

                </form>
            </div>

            <!-- MENU NEW DISHES -->
            <section class="menu">
                <div class="menu__description">
                    <h1>NEW DISHES</h1>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Suscipit, molestias ad. Quas corrupti
                        similique
                        maiores.</p>
                </div>

                <div class="menu__content">

                </div>
            </section>

            <!-- RECOMMENDATION -->
            <section class="recommendation">
                <h1>RECOMMENDATIONS</h1>
                
                <div class="recommend__content">

                </div>

            </section>

            <!-- CATEGORIES -->
            <section class="cate">
                <h1>CATEGORIES</h1>
                <div class="menu__categories">
                    <div class="category active" id="appetizer">
                        <img src="image/appe1.jpg" alt="appe_1">
                        <h3>Appetizer</h3>
                    </div>
                    <div class="category" id="main-dish">
                        <img src="image/main-dish1.jpg" alt="main_dish_1">
                        <h3>Main dishes</h3>
                    </div>
                    <div class="category" id="salad">
                        <img src="image/salad1.jpg" alt="appe_1">
                        <h3>Salad</h3>
                    </div>
                    <div class="category" id="dessert">
                        <img src="image/des1.jpg" alt="appe_1">
                        <h3>Dessert</h3>
                    </div>
                    <div class="category" id="drink">
                        <img src="image/drink1.jpg" alt="appe_1">
                        <h3>Drinks</h3>
                    </div>
                </div>
            </section>
            <!--Section categories items-->
            <!-- <section>
                <div class="row p-5 items__category">
                    <div class="col-3">Hello</div>
                    <div id="item__category" class="row col">

                    </div>
                </div>
            </section> -->

            <div id="item_description">

            </div>
        </div>

        <!-- FEEDBACK -->
        <section class="feedback">
            <div class="feedback__content">
                <p>How satisfied are you with our customer support Performance ?</p>
                <div class="feedback__icon">
                    <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal"><i
                            class="fa-regular fa-face-grin-hearts"></i></a>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal"><i
                            class="fa-regular fa-face-grin"></i></a>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal"><i
                            class="fa-regular fa-face-grimace"></i></a>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal"><i
                            class="fa-regular fa-face-frown"></i></a>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#exampleModal"><i
                            class="fa-regular fa-face-sad-tear"></i></a>
                </div>
            </div>
        </section>

        <!-- MODAL -->
        <!-- Button trigger modal -->
        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <p class="modal-title" id="exampleModalLabel">We are always be here to listen your sharing. So, please allow us to know more about you. Thank you very much.</p>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="feedback__form">
                            <form action="">
                                <input type="text" name="feedback" placeholder="Name">
                                <input type="email" name="email_feedback" placeholder="Email">
                                <textarea cols="30" rows="10" placeholder="What is your suggestion?..."></textarea>
                            </form>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- BACK TO TOP -->
        <a href="#" class="backToTop cd-top text-replace js-cd-top"><i class="fa fa-angle-up"></i></a>
        
        
        
        <!-- SHOPPING CART LOGO -->

        <a class="cart_logo cd-top1 text-replace js-cd-top1" onclick="checkOut();">
            <i class="fa fa-shopping-cart"><div class="position-absolute start-100 translate-middle bg-danger badge border border-light rounded-circle" id="cart-quantity">0</div></i>
        </a>


        
            <!--Chat Box Icon-->
            <div id="chatBox" class="">
                <button class="btn btn-info text-light p-auto" type="button" id="box-btn" onclick="showChat();">
                    <i class="bi bi-chat-text p-auto"></i> Chat
                </button>
            </div>

            <!-- Chat Form -->
            <div class="bg-dark border border-5 border-danger" id="chat-container">

                <!-- Chat Header -->
                <div class="d-flex justify-content-between mb-2 d-flex flex-row position-sticky" id="chat-header">
                    <button class="btn btn-info mt-1 ms-1 fw-bold" type="button" id="chat-info" onclick="showInfo();">
                        <i class="bi bi-info-circle"></i> Info
                    </button>

                    <button class="btn btn-primary mt-1 ms-1 fw-bold" type="button" id="chat-chat" onclick="startChat();">
                        <i class="bi bi-wechat"></i> Chat
                    </button>

                    <button class="btn mt-1 bg-light fw-bold" id="chat-close" onclick="hideChat();">
                        <i class="bi bi-x-square-fill"></i> Exit
                    </button>
                </div>

                <!-- Chat Body -->

                <div class="border border-2 border-dark bg-light" id="chat-body">
                    <!-- Sender Example -->
                    <!-- <div class="container-fluid d-flex gap-1 chat-body-sender">
                        <div class="chat-body-sender-message mt-2 mb-2 bg-info">
                            <span>What is the fastest way to subway of Ho CHi Minh city?</span>
                        </div>
                        <div class="profile-icon">
                            <i class="bi bi-person-square"></i>
                        </div>
                    </div> -->

                    <!-- Receiver Sample -->
                    <!-- <div class="container-fluid d-flex gap-3 chat-body-receiver">
                        <div class="server-icon">
                            <i class="bi bi-server"></i>
                        </div>
                        <div class="chat-body-receiver-message mt-2 mb-2 bg-warning">
                            <span>Go through Le Loi street 1</span>
                        </div>
                    </div> -->
                </div>

                <!-- Chat Message Sender -->
                <div class="border border-3 border-primary bg-light rounded" id="chat-div">
                    <form onsubmit="updateMessage(); return false;">
                        <div class="d-flex">
                            <input class="form-control w-75" type="text" name="message" id="message" placeholder="Enter Your Message...">
                            <button class="form-control w-25 btn btn-primary border border-1 border-dark" type="submit">Send</button>
                            <button class="form-control btn btn-primary d-none" type="reset" id="reset">Reset</button>
                        </div>
                    </form>
                </div>
            </div>

    </main>
    <footer></footer>

    <!-- Jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- jquery waypoint -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.js"></script>
    <!-- countup JS -->
    <!-- <script src="./js/jquery.countup.js"></script> -->

    <!-- Back to Top JS -->
    <script src="./js/util.js"></script>
    <script src="./js/main-backToTop.js"></script>
    <script src="./js/shoppingCart.js"></script>


    <!-- countup JS -->
    <script src="./js/jquery.countup.js"></script>
    <script>
        $('.num').countUp();
    </script>
    <!-- <script
        src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyBpjeHEMJ0UlaQHFwGOZ9R8gqLID5eJlFo&callback=initMap"
        async defer></script> -->

    <script>
        $(document).ready(function() {
            $('header').load('/header')
            $('footer').load('/footer')
        })
    </script>

    <script src="./js/chatbox.js"></script>

    <script>

        // Categories part
        $(function () {
            var menu = [];
            $(".category").click(function () {
                window.location.href = "/delivery"
            })
        });

        // new dishes part
        $(function() {
            fetch('/food/all')
                .then((response) => response.json())
                .then((data) => {
                    console.log(data);
                    $.each(data.content, function (i, v) {
                        if (v.new === true) {
                            var item =
                            '<div class="menu__item">' +
                                '<img src="/' + v.imgPath + '" alt="' + v.name +'">' +
                                '<div class="menu__text">' +
                                    '<h3>' + v.name + '</h3>' +
                                    '<p>' + v.description + '</p>' +
                                    '<p class="purchase">' +
                                        '<span>$' + v.price + '</span>' +
                                        '<button id="' + v.id + '" class="btn btn_primary">Order</button>' +
                                    '</p>' +
                                '</div>' +
                            '</div>'
                            $(".menu__content").append(item);
                        }
                    });
                });
        })

        // Dish description part for new dishes
        $(function() {
            $(".menu__content").on('click', ".btn.btn_primary", function (event) {
                event.stopPropagation();
                event.stopImmediatePropagation();
                event.preventDefault();
                var id = $(this).attr("id");
                console.log(id)
                fetch('/food/all')
                .then((response) => response.json())
                .then((data) => {
                    console.log(data)
                    $.each(data.content, function (i, v) {
                        if (v.id == id) {
                            var item =
                                '<!--DISH DESCRIPTION-->'+  
                                '<div id="overlay2">'+
                                    '<form action="/" method="POST" class="upload_description" id="description_form">'+
                                        '<div class="form_title">' +
                                            '<h3>Description</h3>'+
                                            '<i class="fa-regular fa-circle-xmark" id="close_btn_2"></i>'+
                                        '</div>'+

                                        '<div class="form_content">'+
                                            '<div class="dish_des">'+
                                                '<h2>' + v.name + '</h2>'+
                                                '<img src="/' + v.imgPath + '" alt="">'+
                                                '<p>' + v.description + '</p>'+
                                            '</div>'+
                                            // '<div class="custom_dish">'+
                                            //     '<h2>Size</h2>'+
                                            //     '<input type="radio" id="m" name="sizes" value="M">'+
                                            //     '<label for="m">M</label><br>'+
                                            //     '<input type="radio" id="l" name="sizes" value="L">'+
                                            //     '<label for="l">L</label><br>'+
                                            //     '<input type="radio" id="xl" name="sizes" value="XL">'+
                                            //     '<label for="xl">XL</label>'+

                                            //     '<h2>Add topping</h2>'+
                                            //     '<input type="checkbox" id="cheese" name="cheese" value="Cheese">'+
                                            //     '<label for="cheese"> Cheese</label><br>'+
                                            //     '<input type="checkbox" id="basil_sauce" name="basil_sauce" value="Basil_sauce">'+
                                            //     '<label for="basil_sauce"> Basil sauce</label><br>'+
                                            //     '<input type="checkbox" id="milk_cream" name="milk_cream" value="Milk_cream">'+
                                            //     '<label for="milk_cream"> Milk cream</label>'+
                                            //     '<input type="text" id="text" name="text" value="text">'+
                                            // '</div>'+
                                        '</div>'+

                                        '<div class="description_btn">'+
                                            '<input type="button" value="Add to cart >>>" name="post_address" class="btn btn_primary post_address" onclick="addItem(' + v.id +  ');" id="addCart">'+
                                        '</div>'+

                                    '</form>'+
                                '</div>';
                            $("#item_description").append(item);
                            $("#overlay2").css("display", "grid");
                        }
                    });
                });

                $("#item_description").on('click', "#overlay2", function (event) {
                    event.stopPropagation();
                    event.stopImmediatePropagation();
                    event.preventDefault();
                    if (event.target.id == 'overlay2') {
                        $(this).css("display", "none")
                        $("#overlay2").remove()
                    } 
                })

                $("#item_description").on('click', "#close_btn_2", function (event) {
                    event.stopPropagation();
                    event.stopImmediatePropagation();
                    event.preventDefault();
                    if (event.target.id == 'close_btn_2') {
                        $("#overlay2").css("display", "none")
                        $("#overlay2").remove()
                    } 
                })

                $("#item_description").on('click', "#addCart", function (event) {
                    event.stopPropagation();
                    event.stopImmediatePropagation();
                    event.preventDefault();
                    if (event.target.id == 'addCart') {
                        $("#overlay2").css("display", "none")
                        $("#overlay2").remove()
                    } 
                })
            })
        })

        // recommendation part
        $(function() {
            fetch('/food/all')
            .then((response) => response.json())
            .then((data) => {
                console.log(data)
                $.each(data.content, function (i, v) {
                    if (v.recommended === true) {
                        var item =
                            '<div class="recommend__item">' +
                                '<img src="/' + v.imgPath + '" alt="' + v.name +'">' +
                                // '<div class="recommend__des">' +
                                '<div class="recommend__title">' +
                                    '<h3>' + v.name + '</h3>'+
                                    '<span>$' + v.price + '</span>' +
                                '</div>' +
                                '<div class="recommend__detail">' +
                                    v.description +
                                '</div>' +
                                '<button id="' + v.id + '" class="plus_icon"><i class="fa fa-plus"></i></button>' +
                                // '</div>'
                                
                            '</div>'
                        $(".recommend__content").append(item);
                    }
                });
            });
        })

        // Dish description part for recommend
        $(function() {
            $(".recommend__content").on('click', ".plus_icon", function (event) {
                event.stopPropagation();
                event.stopImmediatePropagation();
                event.preventDefault();
                var id = $(this).attr("id");
                console.log(id)

                fetch('/food/all')
                .then((response) => response.json())
                .then((data) => {
                    console.log(data)
                    $.each(data.content, function (i, v) {
                        console.log(i + v)
                        if (v.id == id) {
                            var item =
                                '<!--DISH DESCRIPTION-->'+  
                                '<div id="overlay2">'+
                                    '<form action="/" method="POST" class="upload_description" id="description_form">'+
                                        '<div class="form_title">' +
                                            '<h3>Description</h3>'+
                                            '<i class="fa-regular fa-circle-xmark" id="close_btn_2"></i>'+
                                        '</div>'+

                                        '<div class="form_content">'+
                                            '<div class="dish_des">'+
                                                '<h2>' + v.name + '</h2>'+
                                                '<img src="/' + v.imgPath + '" alt="">'+
                                                '<p>' + v.description + '</p>'+
                                            '</div>'+
                                            // '<div class="custom_dish">'+
                                            //     '<h2>Size</h2>'+
                                            //     '<input type="radio" id="m" name="sizes" value="M">'+
                                            //     '<label for="m">M</label><br>'+
                                            //     '<input type="radio" id="l" name="sizes" value="L">'+
                                            //     '<label for="l">L</label><br>'+
                                            //     '<input type="radio" id="xl" name="sizes" value="XL">'+
                                            //     '<label for="xl">XL</label>'+

                                            //     '<h2>Add topping</h2>'+
                                            //     '<input type="checkbox" id="cheese" name="cheese" value="Cheese">'+
                                            //     '<label for="cheese"> Cheese</label><br>'+
                                            //     '<input type="checkbox" id="basil_sauce" name="basil_sauce" value="Basil_sauce">'+
                                            //     '<label for="basil_sauce"> Basil sauce</label><br>'+
                                            //     '<input type="checkbox" id="milk_cream" name="milk_cream" value="Milk_cream">'+
                                            //     '<label for="milk_cream"> Milk cream</label>'+
                                            // '</div>'+
                                        '</div>'+

                                        '<div class="description_btn">'+
                                            '<input type="button" value="Add to cart >>>" name="post_address"'+
                                                'class="btn btn_primary post_address" onclick="addItem(' + v.id +  ');" id="addCart">'+
                                        '</div>'+

                                    '</form>'+
                                '</div>';
                            $("#item_description").append(item);
                            $("#overlay2").css("display", "grid");
                        }
                    });
                });
            })
            $("#item_description").on('click', "#overlay2", function (event) {
                    event.stopPropagation();
                    event.stopImmediatePropagation();
                    event.preventDefault();
                    if (event.target.id == 'overlay2') {
                        $(this).css("display", "none")
                        $(this).remove()
                    } 
                })

                $("#item_description").on('click', "#close_btn_2", function (event) {
                    event.stopPropagation();
                    event.stopImmediatePropagation();
                    event.preventDefault();
                    if (event.target.id == 'close_btn_2') {
                        $("#overlay2").css("display", "none")
                        $("#overlay2").remove()
                    } 
                })

                $("#item_description").on('click', "#addCart", function (event) {
                    event.stopPropagation();
                    event.stopImmediatePropagation();
                    event.preventDefault();
                    if (event.target.id == 'addCart') {
                        $("#overlay2").css("display", "none")
                        $("#overlay2").remove()
                    } 
                })
        })
    </script>
    <script src="js/menu.js"></script>
    <script src="js/chatbox.js"></script>
</body>

</html>